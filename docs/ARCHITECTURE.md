# Career Intelligence Space — Architecture

## System Overview

CIS (Career Intelligence Space) is an automated career research and decision support system designed to convert unstructured career opportunities into structured analysis and actionable insights.

## High-Level Architecture

```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   ChatGPT       │    │    Perplexity    │    │     GitHub      │
│  (Thinking      │    │  (Orchestrator   │    │  (Control       │
│   Partner)      │    │   Intake)        │    │   Plane)        │
└─────────────────┘    └──────────────────┘    └─────────────────┘
         │                        │                        │
         │                        │                        │
         └────────────────────────┼────────────────────────┘
                                  │
                          ┌───────▼────────┐
                          │  Agent System  │
                          │                │
                          │ ┌────────────┐ │
                          │ │Agent 0     │ │
                          │ │Orchestrator│ │
                          │ └────────────┘ │
                          │ ┌────────────┐ │
                          │ │Agent 1     │ │
                          │ │Research    │ │
                          │ └────────────┘ │
                          │ ┌────────────┐ │
                          │ │Agent 2     │ │
                          │ │Synthesizer │ │
                          │ └────────────┘ │
                          │ ┌────────────┐ │
                          │ │Agent 3     │ │
                          │ │Intelligence│ │
                          │ └────────────┘ │
                          └────────────────┘
```

## Component Responsibilities

### External Systems

- **ChatGPT**: Thinking partner for drafting, interview notes normalization, and canvas documents
- **Perplexity**: Runs orchestrator-style intakes, produces task queue YAML files
- **GitHub**: Central control plane for schemas, queues, CI validation, artifacts, and logs

### Agent System

#### Agent 0: Orchestrator

- **Purpose**: Convert intakes to executable task queues
- **Input**: Normalized intake documents from Perplexity
- **Output**: `tasks/*.yml` files with agent assignments
- **Runbook**: `docs/ORCH_RUNBOOK.md`

#### Agent 1: Research

- **Purpose**: Market research, role discovery, comparable analysis
- **Input**: Research task specifications
- **Output**: Market data, role comparisons, salary benchmarks
- **Runbook**: `docs/RESEARCH_RUNBOOK.md`

#### Agent 2: Synthesizer

- **Purpose**: Aggregate research into actionable insights
- **Input**: Research outputs, interview data
- **Output**: Role scorecards, decision briefs, negotiation prep
- **Runbook**: `docs/SYNTH_RUNBOOK.md`

#### Agent 3: Intelligence

- **Purpose**: Deep analysis, pattern recognition, strategic insights
- **Input**: Historical data, market trends, career trajectories
- **Output**: Strategic recommendations, risk assessments, opportunity rankings
- **Runbook**: `docs/INTEL_RUNBOOK.md`

## Data Flow

### 1. Ingest Phase

Interview Notes → ChatGPT → Normalized Intake → Perplexity

### 2. Orchestration Phase

Intake → Orchestrator → tasks/YYYYMMDD-orch-*.yml

### 3. Execution Phase

Queue → CI Validation → Agent Assignment → Deliverable Generation

### 4. Decision Phase

Deliverables → Role Node Update → Scorecard → DECISIONS.md Entry

### 5. Tracking Phase

Completed Tasks → STATUS.md Update → Dashboard Refresh

## File System Organization

### Core Directories

```
├── docs/                 # Documentation and runbooks
│   ├── VISION.md         # System charter and goals
│   ├── ARCHITECTURE.md   # This file
│   ├── *_RUNBOOK.md      # Agent-specific SOPs
│   └── STATUS.md         # Auto-generated system status
├── tasks/                # Task queue files
│   └── YYYYMMDD-orch-*.yml
├── agents/               # Agent manifests and configurations
│   ├── agent0/           # Orchestrator
│   ├── agent1/           # Research
│   ├── agent2/           # Synthesizer
│   └── agent3/           # Intelligence
├── 00_GOVERNANCE/        # Policies and procedures
├── 01_GUIDELINES/        # Best practices and standards
├── 02_TEMPLATES/         # Reusable templates
├── 03_RESEARCH/          # Research outputs and findings
├── 04_TOOLS/             # Utilities and helper scripts
├── 05_ASSETS/            # Static assets and resources
├── 06_CASES/             # Case studies and examples
└── 99_LOGS/              # System logs and audit trails
```

### Naming Conventions

- Role Node IDs: `role_____` (e.g., `role_bluestone_mt_2025q3`)
- Queue Files: `tasks/YYYYMMDD-orch-*.yml` with top-level `queue:`
- Decision Log: `DECISIONS.md` (ADR-lite format, newest first)
- Status Page: `docs/STATUS.md` (auto-generated by queue processor)

## Design Lane & RFC Path

The Career Intelligence Space includes a structured design documentation system to support technical decision-making and system evolution through a two-tier promotion pipeline:

### Design Lane (`/docs/design/`)

- **Purpose**: Working design documents, architecture explorations, and draft technical specifications
- **Governance**: Lightweight review process, version-controlled iteration
- **Contents**: Technical deep-dives, system design proposals, interface specifications
- **Index**: [docs/design/INDEX.md](docs/design/INDEX.md) - searchable catalog of all design documents
- **Overview**: [docs/design/README.md](docs/design/README.md) - design lane conventions and standards

### RFC Path (`/designrfcs/`)

- **Purpose**: Formal Request for Comments documents for significant architectural changes
- **Governance**: Structured review process with explicit approval/rejection decisions
- **Contents**: Major system changes, cross-agent protocol modifications, breaking changes
- **Promotion**: Mature design documents from `/docs/design/` promoted to RFC status when ready for formal review

### Promotion Pipeline

```
Concept → docs/design/ → designrfcs/ → Implementation
   ↓         (iterate)      (decide)       (execute)
 Working    Design Lane    RFC Review    Production
  Draft       Document        Vote        System
```

This dual-path approach ensures that:
- Early-stage design work can proceed without heavyweight process overhead
- Significant architectural decisions receive appropriate scrutiny and documentation
- Design knowledge is captured and searchable across the system lifecycle
- Technical debt is visible and trackable through the design document archive

## CI/CD Pipeline

### Validation Steps

1. Schema Validation: Ensure all YAML files conform to expected schemas
2. Task Validation: Verify task definitions include required deliverables[]
3. Agent Assignment: Confirm assigned agents exist and are configured
4. Dependency Check: Validate task dependencies and execution order

### Automation Triggers

- Queue Processing: Automatic agent assignment on task file commits
- Status Updates: Auto-generation of STATUS.md on task completion
- Decision Logging: Automatic DECISIONS.md updates for significant changes

## Security & Privacy

### Data Protection

- PII Exclusion: No personally identifiable information stored in repository
- External References: Sensitive data referenced via external secure stores
- Access Control: Repository-level permissions for data access

### Audit Trail

- **Change Tracking**: All modifications tracked via Git history
- **Decision Records**: ADR-lite entries for all significant decisions
- **Agent Logs**: Comprehensive logging in `99_LOGS/` directory

## Scalability Considerations

### Performance

- **Queue Processing**: Asynchronous task execution
- **Agent Isolation**: Independent agent execution environments
- **Caching**: Intelligent caching of research data and API calls

### Extensibility

- **Plugin Architecture**: New agents can be added without system changes
- **Schema Evolution**: Versioned schemas support backward compatibility
- **Integration Points**: Well-defined APIs for external system integration

## Monitoring & Observability

### Key Metrics

- **Coverage**: % of live leads with Role Nodes & scores
- **Velocity**: Median time from intake → decision brief
- **Quality**: % of tasks passing CI without revision
- **Leverage**: # of negotiation levers captured per engaged role

### Alerting

- **Failed Tasks**: Notification on task execution failures
- **Schema Violations**: Alerts for validation failures
- **System Health**: Monitoring of agent performance and availability

## Export Decision Reflection (v1.1)

In September 2025, the Career Intelligence Space reached a decision point regarding export destinations. The primary question was whether matured artifacts should flow back into the **Master Portfolio** (local-only, employer-facing) or remain contained within the **Career Intelligence repo** (GitHub, exploratory sandbox).

**Decision:**  
Exports will remain internal to the Career Intelligence repo for now, specifically under `05_EXPORTS/`, with governance and provenance intact. This ensures that:

- The Master Portfolio remains curated, employer-facing, and unpolluted by exploratory churn.
- CI exports are fully versioned, reproducible, and CI-auditable.
- Future promotion to MP remains possible through explicit, intentional handoff.

**Rationale:**  
This approach balances discipline with flexibility: CI handles iteration and automation, MP preserves polish and presentation. A one-way promotion path is maintained, but without prematurely binding CI to MP's stricter standards.

**Implications for Architecture:**  
- `05_EXPORTS/` is now a governed export layer for CI.  
- Promotion to MP requires deliberate human review and manual copy into local storage.  
- No automated writes into MP.  
- This decision protects MP's role while keeping CI scalable for automation.

## Future Roadmap

### Phase 1 (Current)

- Docs pack completion
- STATUS.md automation
- Comparables & Stage-2 flows

### Phase 2

- Auto-score helpers
- Negotiation brief generator
- Role taxonomy development

### Phase 3

- Recurring market sweeps
- Pipeline refresh automation
- Semi-automated outreach drafts
